process PROD  = {
	source = PoolSource {
		untracked vstring fileNames = { 'file:h2.00028142.hcal.OutServ_0.0.root'}
		untracked int32 maxEvents = 1000
	}

	module unpacker = HcalRawToDigi {
                int32 firstSample = 0
                int32 lastSample = 9
                untracked int32 HcalFirstFED = 700
                untracked vint32 FEDs = { 701 }
		bool FilterDataQuality = false
		untracked bool UnpackZDC = true
	}

	module reco = HcalSimpleReconstructor {
	       int32 firstSample = 4
	       int32 samplesToAdd = 3
               bool correctForTimeslew = false
               bool correctForPhaseContainment = false
	       double correctionPhaseNS = 0.0
	       string Subdetector = 'ZDC'
               InputTag digiLabel = unpacker
	}

        module dumper = HcalDigiDump {
        }
        module dumper2 = HcalRecHitDump {
        }

        module tbunpacker = HcalTBObjectUnpacker {
               untracked int32 HcalTriggerFED  = 1
               untracked int32 HcalSlowDataFED = -1
               untracked int32 HcalTDCFED      = 8
               untracked int32 HcalQADCFED      = 8
               untracked int32 HcalSourcePosFED = -1
               untracked bool IncludeUnmatchedHits = false
               untracked string ConfigurationFile = 'configQADCTDC.txt'
        }

#	module out = PoolOutputModule {
#		untracked string fileName = 'Persist.root'
#	}

	es_module = HcalDbProducer {}
        es_source = HcalHardcodeCalibrations {
                untracked vstring toGet = {
                          "PedestalWidths",
                          "GainWidths", "QIEShape",
                          "channelQuality"}
        }

        es_source es_ascii = HcalTextCalibrations { VPSet input = {
                 {string object = "ElectronicsMap"
                  FileInPath file = "RecoTBCalo/ZDCTBAnalysis/test/tb2006_zdc.dat"},
                 {string object = "Pedestals"
                  FileInPath file = "RecoTBCalo/ZDCTBAnalysis/test/zdc_pedestals.txt"},
                 {string object = "Gains"
                  FileInPath file = "RecoTBCalo/ZDCTBAnalysis/test/zdc_pedestals.txt"},
                 {string object = "QIEData"
                  FileInPath file = "RecoTBCalo/ZDCTBAnalysis/test/zdc_qie.txt"}
                }
        }  

	module analysis = ZdcTBAnalyzer {
        	        PSet ZdcTBAnalyzer = {
                	        string ntupleOutputFileName = "h2.00028154.zdcanalisis.root"
                        	}
                }	

#	path p = { unpacker, dumper }
#	path p = { unpacker, dumper, reco, dumper2 }
	path p = { unpacker, tbunpacker, reco, analysis}
#	endpath op = {out}

}
